# 컴퓨터 시스템 및 기초설계 최종 보고서


팀    원 : 황준원,장현하, 채규홍 
교 수 님 : 강 승우 교수님        
제 출 일 : 2015-12-11            

# Ⅰ 문제 상황
1.1 필요성 

갓 태어난 신생아부터 영아 및 유아까지 아기를 돌본다는 것은 쉬운 일은 아닙니다. 아기들은 3, 4시간 간격으로 먹고 잠도 30분에서 2시간정도로 자는 정도로 그 패턴도 일정하지 않습니다. 
때문에 아기를 돌보는 어머니들은 아침부터 새벽까지 그 시간에 상관없이 항상 그 아기의 곁에서 아기를 안아주거나, 대소변을 가려주는 등 끊임없이 아기를 돌볼 수밖에 없습니다. 때문에 항상 아기의 곁에서 아기를 돌보는 어머니라 할지라도 아기의 육아를 도맡으면서 동시에 아기의 건강상태까지 관리하는 것은 쉬운 일이 아닐 것입니다. 
게다가 일반적으로 어머니들은 아기들의 몸에 이상이 생기는 경우를 보통 아기가 해당 질병에 해당하는 이상 증세가 나타나고서야 알아차리는 경우가 많습니다. 그리고 면역력이 약한 아기의 경우 작은 질병도 아기에게는 큰 위협이 될 수 있습니다.
때문에 힘든 육아 속에서도 아기의 건강상태를 체크하는 일은 육아의 중요한 한 부분이라 할 수 있습니다. 

1.2. 5Whys 및 진짜 문제 정의
Q1. 아이의 건강상태를 꾸준히 체크하는 것이 왜 힘든가

A1. 어머니 등 보호자가 육아에 많은 노동력을 소모하기 때문이다. 

Q2. 어머니 등 보호자가 왜 육아에 많은 노동력을 소모하는가

A2. 아기는 밤과 낮 시간에 상관없이 안아주거나, 밥을 챙겨주는 등 많은 관심과 돌봄이 필요하기 때문이다.  

진짜 문제 정의 : 육아에 많은 노동력을 소비하는 보호자들을 위해 대신 꾸준히 아기의 건강상태를 체크하여 질병을 예방하는 방법을 구상하여 보자

1.3 요구사항
이 프로젝트는 육아에 힘든 부모들을 대신하여 아이의 건강 상태를 측정한 후 그 데이타를 스마트폰으로 전송하여 아이의 건강상태 관리를 쉽게 하는 것이다. 아이의 건강상태 측정의 방식으로는 맥박 및 체온을 측정하는 것이고 측정된 데이타들은 부모의 스마트폰으로 전송되어 항상 체크가 가능하다. 이때 전송된 데이터가 미리 기록되어 있는 기존의 패턴과 다른 패턴을 보일 경우 그 기준을 정하여 부모에게 스마트폰으로 아이의 건강 경고 메시지를 보낸다.      
  
# Ⅱ Data Flow Diagram


![](http://i.imgur.com/KCWAmF7.png)
![](http://i.imgur.com/Y2Ln9U4.png)
![](http://i.imgur.com/IAPUuTp.png)
![](http://i.imgur.com/0Qm6BcS.png)
![](http://i.imgur.com/Q3J70FF.png)





3.1 용도 및 기능설명

➀register사용자로부터 정보를 입력받아 회원을 가입한다. 회원정보 DB를 읽어온 후 사용자로부터 입력받은 고유번호의 존재 여부를 검사한다. 만약 존재하지 않는다면 함수는 종료되고 존재한다면 회원가입 절차가 진행된다. ID가 회원정보 DB에 존재하지 않고 12자 이하의 영문, 숫자로 이루어져 있을 경우 아이디가 적절하다. PW 또한 12자 이하의 영문, 숫자로 이루어져 있을 경우 PW가 적절하다고 판단한다. 만약 이 조건에 부합될 경우 오류 메세지와 함께 함수가 종료되며 조건이 합당할 경우 회원정보 DB에 정보를 삽입하고 함수는 종료 된다.

➁login
사용자로부터 정보를 입력받아 로그인한다. 회원정보 DB를 읽어온 후 사용자로부터 입력받은 ID검사한다. ID가 존재한다면 PW검사를 통해 일치하는지를 검사한다. 두 정보가 회원정보 DB와 일치한다면 로그인을 하게되며 회원로그 DB에 로그인 기록을 남기게 된다.

➂babyLogInsert
아기의 체온, 심박 수, 산소포화도, 개월 수를 아기로그 DB에 저장한다. 아기로그 DB에 주기적으로 저장한다.

➃babyLogDelete
아기로그 DB에 존재하는 아기의 체온, 심박 수, 산소포화도, 개월 수에 대한 정보를 삭제한다. 삭제조건은 로그의 기간이 6개월 이상 지나면 삭제하게 된다.

➄babyLogConfirm
아기로그 DB에 존재하는 아기의 정보를 인출하는 기능가지고 있다. 로그인한 아이디를 매개변수로 받아 해당 회원의 아이디와 일치하는 아기의 정보중 가장 최근 데이터를 아기로그 DB로부터 읽어온다.

➅babyLogTransmit
아기의 정보를 사용자의 스마트폰으로 전송하는 기능을 가졌다. 사용자의 아이디에 해당하는 아기의 정보를 인출한 후 아기의 정보가 위험수치에 해당하는지 판단한 후 1분주기로 아기정보를 전송한다.

➆analyzebaby
아기의 체온, 심박 수, 산소포화도 수치가 위험한지를 판단하는 기능을 가졌다. 입력받은 아기의 개월 수에 따라서 각각의 정보가 위험수치에 도달했는지 판단한 후 위험수치 유지시간이 3분이상 유지되어 있는지 체크한다.

➇checkPulse
아기의 심박 수가 위험수치에 도달했는지 체크한다. 아기의 개월 수에 따라 심박 수의 위험수치를 검사하고 위험수치가 넘게 되면 위험지수가 1증가하게 되며 정상수치로 돌아올 경우 0으로 돌아가게 된다,

➈checkTemperature
아기의 체온이 위험수치에 도달했는지 체크한다. 아기의 개월 수에 따라 체온의 위험수치를 검사하고 위험수치가 넘게 되면 위험지수가 1증가하게 되며 정상수치로 돌아올 경우 0으로 돌아가게 된다.

➉checkSao2
아기의 산소포화도가 위험수치에 도달했는지 체크한다. 아기의 산소포화도의 위험수치를 검사하고 위험수치가 넘게 되면 위험지수가 1증가하게 되며 정상수치로 돌아올 경우 0으로 돌아가게 된다.

11. checkdangerout
아기의 위험지수를 검사한다. 체온, 맥박, 산소포화도 수치에 대한 위험지수를 검사하게 되고 만약 위험지수가 3이상일 경우 스마트폰으로 경고 메시지를 전송한다.


![](http://i.imgur.com/Vfg8AkL.png)
![](http://i.imgur.com/1KLYVx0.png)
![](http://i.imgur.com/AZuJ1wC.png)
![](http://i.imgur.com/BPjhPpo.png)
![](http://i.imgur.com/LeOLB3Z.png)
![](http://i.imgur.com/Gm3SuOi.png)
![](http://i.imgur.com/U021VBJ.png)
![](http://i.imgur.com/sN7MgnJ.png)
![](http://i.imgur.com/TqWX40V.png)

# Ⅳ 기술 및 개발환경

4.1 구현에 필요한 기술 및 개발 환경
가. 산소포화도 센서 및 MCU
     ① 현재 존재하는 산소포화도 센서를 활용(OSRAM사의 SFH705)
      ② Micro Control Unit을 제어 및 활용하기 위한 마이크로프로세서 코딩 및 제어 기술
      ③ 데이터를 DB서버 및 여타 기기에 전달하기 위한 bluetooth 및 WIFI 기기 제어 기술
      ➃ Texas Instrument사의 AFE4403를 이용하여 아날로그 변환장치로 이용

나. 웹 서버 운용 및 데이터베이스
    ① 데이터베이스 서버 구축 기술
    ② 전송 받은 데이터를 관리하기 위한 DB 서버 운용 및 코딩 기술
    ➂ 클라이언트의 요청에 응답하는 백 엔드 운용 기술

다. 스마트 폰 App
   ① App 개발을 위한 코딩 기술(자바+XML, 스위프트)
   ➁ 스크립트 언어 사용 기술


데이터베이스 – MySQL, 서버OS – Linux Ubuntu14.03, 서버 – Apache
사용 언어 – Python, Java, IDE – Android Studio, Pychar

# Ⅴ 시스템 평가 계획
5.1 실험 목표
- 24시간 실시간으로 아기의 건강을 체크
- 실시간으로 측정된 데이터를 보호자가 상시 체크 가능한 기기에 전송
- 위험 상황 시 부모에게 즉각적으로 알릴 수 있는 시스템 마련- 정확한 데이터를 일정한 주기로 오류 없이 전송 

5.2 시스템 스터디 - 시뮬레이션 스터디 실험
가. 시스템의 구성 요소 별 시험
   ① 디바이스모듈
	평가지표 : 파워 소모량, 데이터 수집 및 송/수신 정확도
	독립변수 : Mini Cell PCF441435와 같은 배터리 종류, 산소포화도 센서의 종류
	종속변수 : 파워 소모량, 데이터 수집 및 송/수신 정확도
   ② 서버
	평가지표 : 손실없는 데이터의 입/출력 및 정확한 위험 신호의 판단 및 송신
	독립변수 : 데이터베이스 구조(코드), 초당 요청 수
	종속변수 : 데이터의 손실 여부, 데이터 입/출력 정확도, 위험 신호 정확도
   ③ 스마트폰
	평가지표 : 스마트폰 알람기능 정상작동여부, 24시간 DB서버 접속여부,
                   앱의 가동 여부, 정확한 데이터 입력 및 반영 여부, 데이터수신율
	독립변수 : 스마트폰 기기 종류, 안드로이드/IOS 버전
	종속변수 : 알람작동 여부, 앱의 가동률, 데이터 입력 결과, 데이터 수신 결과

나. End-to-end 시스템 실험
	평가지표 : 센서->스마트폰까지의 데이터 송/수신 정확도 및 속도, 초기등록여부
	독립변수 : 센서의 종류, 데이터베이스 프로그램 종류, 
	종속변수 : 태스크 수행 시간, 정확도

다. 변수의 변화에 따른 실험 결과 예상
   ① 디바이스모듈
	1. 센서의 배터리 가격이 증가할수록 배터리 용량이 증가할 것이다.
	   실험방법 : 완충된 배터리를 종류를 달리하여 센서에 장착한 후, 
		      센서를 구동시켜 배터리가 방전될 때까지의 시간을 측정한다.
	2. 산소포화도 센서의 가격이 증가할수록 센싱된 값의 정확도가 증가 할 것이다.
	   실험방법 : 산소포화도 센서를 통해 측정된 값과 실제 값과 비교한다.
   ② 서버
	독립변수 : 데이터베이스 구조(코드), 초당 요청 수
	실험방법 : 스트레스 테스트를 통해 서버에 부하를 주어 어느 정도 버티는지 테스		   트 한다. 또한 쿼리문을 날릴 시에 응답 시간을 측정하여 코드에 개선   		   요지를 측정한다. 부하테스트 도중 시스템이 죽을 때 안정적으로 종료		   되는지 여부를 검사한다.
	종속변수 : 데이터의 손실 여부, 데이터 입/출력 정확도, 위험 신호 정확도
	실험방법 : 데이터의 요청에 대한 응답의 횟수를 계산하여 송/수신 정확도를 측정.
   ③ 스마트폰
	1. 스마트폰의 사양이 올라갈수록 알람작동 여부의 안정성과 앱의 데이터 처리율이 	   올라갈 것이다.
	   실험방법 : 서버와 연결되어있는 스마트폰의 종류를 달리하여 알람작동 여부를 		      검사하고, 데이터의 입력 및 수신 결과를 확인한다.
	2. 안드로이드 버전이 최신일수록 데이터 입력/수신 결과가 정확할 것이다.
	   실험방법 : 안드로이드의 버전을 달리하여(스마트폰 기종은 그대로)
		      알람작동 여부를 측정하고, 데이터의 입력 및 수신 결과를 확인한다.
   ④ End-to-end 시스템 
	* 센서의 가격이 오를수록 데이터의 정확도(산포도, 체온, 맥박 등)가 올라갈 것이다.
	* 데이터베이스 프로그램 종류에 따라 태스크 수행 시간 및 정확도가 변화할 것이다.
5.3 실험 결과의 분석과 해석
가. 시스템의 구성 요소 별 실험 결과
   ① 디바이스모듈
	Mini Cell PCF441435배터리를 사용했을 때의 파워소모량 : 400W
	Mini Cell PCF582124배터리를 사용했을 때의 파워소모량 : 350W
	M사 산소포화도 센서를 사용했을 때의 데이터 정확도 : 98.6%
	N사 산소포화도 센서를 사용했을 때의 데이터 정확도 : 99.1%		
   ② 서버
	100만개의 레코드를 테이블에 삽입 시 일반적인 쿼리문과 프로시저를 사용했을 시	에 응답 시간 차 : 저장 프로시저 – 101초, 클라이언트 응용 프로그램 - 279초

   ③ 스마트폰
	G4, S6, I6s, I6, nexus, nokia
	알람작동 여부, 앱의 가동률, 데이터 입력 결과, 데이터 수신 결과

나. End-to-end 시스템 실험
	평가지표 : 센서->스마트폰까지의 데이터 송/수신 정확도 및 속도, 초기등록여부
	독립변수 : 센서의 종류, 데이터베이스 프로그램 종류, 
	종속변수 : 태스크 수행 시간, 정확도






